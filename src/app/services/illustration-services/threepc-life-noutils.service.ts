import { Injectable, OnInit } from '@angular/core';
import { DecimalPipe, PercentPipe, CurrencyPipe } from '@angular/common';

@Injectable({
    providedIn: 'root'
})
export class ThreePcLifeNoUtilsService {

    private tableData: any[];
    private chartData: any[];

    constructor(private decimalpipe: DecimalPipe, private percentPipe: PercentPipe, private currencyPipe: CurrencyPipe) { }

    getChartData(): any {

        this.chartData = [
            292500,
            298714.9086,
            295089.1469,
            290433.9765,
            276486.0615,
            259875.4715,
            241042.4346,
            243098.3757,
            246291.8371,
            252144.536,
            244442.1223,
            232959.8645,
            217395.7876,
            208755.4287,
            197332.4363,
            184629.1298,
            175021.3601,
            159120.1639,
            141383.1602,
            121479.8563
        ]
        return this.chartData;
    }

    getTableData(): any {

        // console.log("get 3% life no utils");

        this.tableData = [
            {
                "name": "Portfolio Investment Perfomance",
                "yr1": 0.06,
                "yr2": 0.02,
                "yr3": 0.018,
                "yr4": -0.02,
                "yr5": -0.032,
                "yr6": -0.044,
                "yr7": 0.063,
                "yr8": 0.073,
                "yr9": 0.091,
                "yr10": 0.028,
                "yr11": 0.014,
                "yr12": -0.003,
                "yr13": 0.04,
                "yr14": 0.032,
                "yr15": 0.033,
                "yr16": 0.064,
                "yr17": 0.036,
                "yr18": 0.037,
                "yr19": 0.037,
                "yr20": 0.052
            },
            {
                "name": "A1 Units",
                "yr1": 117000,
                "yr2": 121409.8461,
                "yr3": 120991.888,
                "yr4": 120139.6009,
                "yr5": 114579.5544,
                "yr6": 107662.6474,
                "yr7": 99604.12763,
                "yr8": 102328.5408,
                "yr9": 105897.6932,
                "yr10": 111206.963,
                "yr11": 109590.6257,
                "yr12": 106081.1307,
                "yr13": 100439.9431,
                "yr14": 98798.62871,
                "yr15": 95855.43093,
                "yr16": 92450.38563,
                "yr17": 91244.70913,
                "yr18": 86736.36683,
                "yr19": 81527.08304,
                "yr20": 75440.65564
            },
            {
                "name": "B36 Units",
                "yr1": 175500,
                "yr2": 177305.0625,
                "yr3": 174097.2588,
                "yr4": 170294.3756,
                "yr5": 161906.5072,
                "yr6": 152212.824,
                "yr7": 141438.3069,
                "yr8": 140769.8349,
                "yr9": 140394.144,
                "yr10": 140937.573,
                "yr11": 134851.4966,
                "yr12": 126878.7338,
                "yr13": 116955.8445,
                "yr14": 109956.8,
                "yr15": 101477.0053,
                "yr16": 92178.74421,
                "yr17": 83776.65102,
                "yr18": 72383.7971,
                "yr19": 59856.07719,
                "yr20": 46039.20065
            },
            {
                "name": "Property Value",
                "yr1": 397500,
                "yr2": 405450,
                "yr3": 412748.1,
                "yr4": 404493.138,
                "yr5": 391549.3576,
                "yr6": 374321.1859,
                "yr7": 397903.4206,
                "yr8": 426950.3703,
                "yr9": 465802.854,
                "yr10": 478845.3339,
                "yr11": 485549.1685,
                "yr12": 484092.521,
                "yr13": 503456.2219,
                "yr14": 519566.821,
                "yr15": 536712.5261,
                "yr16": 571062.1277,
                "yr17": 591620.3643,
                "yr18": 613510.3178,
                "yr19": 636210.1996,
                "yr20": 669293.1299
            },
            {
                "name": "Amount Invested in Portfolio",
                "yr1": 292500,
                "yr2": 298714.9086,
                "yr3": 295089.1469,
                "yr4": 290433.9765,
                "yr5": 276486.0615,
                "yr6": 259875.4715,
                "yr7": 241042.4346,
                "yr8": 243098.3757,
                "yr9": 246291.8371,
                "yr10": 252144.536,
                "yr11": 244442.1223,
                "yr12": 232959.8645,
                "yr13": 217395.7876,
                "yr14": 208755.4287,
                "yr15": 197332.4363,
                "yr16": 184629.1298,
                "yr17": 175021.3601,
                "yr18": 159120.1639,
                "yr19": 141383.1602,
                "yr20": 121479.8563
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Income and Gains",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Portfolio Income",
                "yr1": 5374.6875,
                "yr2": 5429.967539,
                "yr3": 5331.728552,
                "yr4": 5215.265251,
                "yr5": 4958.386782,
                "yr6": 4661.517735,
                "yr7": 4331.548149,
                "yr8": 4311.076194,
                "yr9": 4299.570659,
                "yr10": 4316.213172,
                "yr11": 4129.827083,
                "yr12": 3885.661224,
                "yr13": 3581.772737,
                "yr14": 3367.426999,
                "yr15": 3107.733289,
                "yr16": 2822.974041,
                "yr17": 2565.659937,
                "yr18": 2216.753786,
                "yr19": 1833.092364,
                "yr20": 1409.95052
            },
            {
                "name": "A Unit Gains",
                "yr1": 9524.471144,
                "yr2": 5078.369203,
                "yr3": 4855.805372,
                "yr4": 358.0751212,
                "yr5": -980.8617205,
                "yr6": -2162.759887,
                "yr7": 8525.38885,
                "yr8": 9807.560241,
                "yr9": 12071.65835,
                "yr10": 5819.193927,
                "yr11": 4267.638567,
                "yr12": 2400.346625,
                "yr13": 6558.549062,
                "yr14": 5716.712362,
                "yr15": 5682.748094,
                "yr16": 8338.898584,
                "yr17": 5762.480045,
                "yr18": 5604.128527,
                "yr19": 5307.422314,
                "yr20": 6058.88993
            },
            {
                "name": "B Unit Gains",
                "yr1": 6844.5,
                "yr2": 2304.965813,
                "yr3": 2036.937929,
                "yr4": -2213.826882,
                "yr5": -3367.655349,
                "yr6": -4353.286767,
                "yr7": 5791.898668,
                "yr8": 6679.528667,
                "yr9": 8304.313616,
                "yr10": 2565.063828,
                "yr11": 1227.148619,
                "yr12": -247.413531,
                "yr13": 3040.851956,
                "yr14": 2287.101439,
                "yr15": 2176.681765,
                "yr16": 3834.635759,
                "yr17": 1960.373634,
                "yr18": 1740.83032,
                "yr19": 1439.538657,
                "yr20": 1556.124982
            },
            {
                "name": "Total Investment Return",
                "yr1": 21743.65864,
                "yr2": 12813.30256,
                "yr3": 12224.47185,
                "yr4": 3359.51349,
                "yr5": 609.8697126,
                "yr6": -1854.528918,
                "yr7": 18648.83567,
                "yr8": 20798.1651,
                "yr9": 24675.54262,
                "yr10": 12700.47093,
                "yr11": 9624.614269,
                "yr12": 6038.594318,
                "yr13": 13181.17375,
                "yr14": 11371.2408,
                "yr15": 10967.16315,
                "yr16": 14996.50838,
                "yr17": 10288.51362,
                "yr18": 9561.712633,
                "yr19": 8580.053335,
                "yr20": 9024.965432
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Expenditure",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Lifestyle Costs ",
                "yr1": -3600,
                "yr2": -3690,
                "yr3": -3782.25,
                "yr4": -3876.80625,
                "yr5": -3973.726406,
                "yr6": -4073.069566,
                "yr7": -4174.896306,
                "yr8": -4279.268713,
                "yr9": -4386.250431,
                "yr10": -4495.906692,
                "yr11": -4608.304359,
                "yr12": -4723.511968,
                "yr13": -4841.599767,
                "yr14": -4962.639761,
                "yr15": -5086.705756,
                "yr16": -5213.873399,
                "yr17": -5344.220234,
                "yr18": -5477.82574,
                "yr19": -5614.771384,
                "yr20": -5755.140668
            },
            {
                "name": "Property Costs",
                "yr1": -8418.75,
                "yr2": -9154.866022,
                "yr3": -9541.54133,
                "yr4": -9925.5844,
                "yr5": -9908.975013,
                "yr6": -9768.37046,
                "yr7": -9509.553234,
                "yr8": -10382.80849,
                "yr9": -11444.1865,
                "yr10": -12829.49774,
                "yr11": -13506.19339,
                "yr12": -14019.15498,
                "yr13": -14303.77527,
                "yr14": -15250.04601,
                "yr15": -16131.16232,
                "yr16": -17081.86145,
                "yr17": -18639.05244,
                "yr18": -19796.00712,
                "yr19": -21047.11887,
                "yr20": -22379.5023
            },
            {
                "name": "Administration Fees",
                "yr1": -3510,
                "yr2": -3594.198317,
                "yr3": -3555.850909,
                "yr4": -3505.037769,
                "yr5": -3337.758387,
                "yr6": -3137.067952,
                "yr7": -2908.444984,
                "yr8": -2942.626461,
                "yr9": -2992.406837,
                "yr10": -3077.480175,
                "yr11": -2992.374352,
                "yr12": -2860.004298,
                "yr13": -2676.157591,
                "yr14": -2581.54743,
                "yr15": -2452.601517,
                "yr16": -2308.543226,
                "yr17": -2206.437147,
                "yr18": -2024.883474,
                "yr19": -1821.467018,
                "yr20": -1592.001841
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Total Cost",
                "yr1": -15528.75,
                "yr2": -16439.06434,
                "yr3": -16879.64224,
                "yr4": -17307.42842,
                "yr5": -17220.45981,
                "yr6": -16978.50798,
                "yr7": -16592.89452,
                "yr8": -17604.70366,
                "yr9": -18822.84376,
                "yr10": -20402.88461,
                "yr11": -21106.8721,
                "yr12": -21602.67125,
                "yr13": -21821.53263,
                "yr14": -22794.23321,
                "yr15": -23670.46959,
                "yr16": -24604.27808,
                "yr17": -26189.70982,
                "yr18": -27298.71633,
                "yr19": -28483.35727,
                "yr20": -29726.64481
            },
            {
                "name": "Portfolio Gains/Losses",
                "yr1": 6214.908644,
                "yr2": -3625.761784,
                "yr3": -4655.170386,
                "yr4": -13947.91493,
                "yr5": -16610.59009,
                "yr6": -18833.0369,
                "yr7": 2055.941145,
                "yr8": 3193.46144,
                "yr9": 5852.698859,
                "yr10": -7702.41368,
                "yr11": -11482.25783,
                "yr12": -15564.07693,
                "yr13": -8640.358874,
                "yr14": -11422.99241,
                "yr15": -12703.30644,
                "yr16": -9607.769692,
                "yr17": -15901.19621,
                "yr18": -17737.0037,
                "yr19": -19903.30394,
                "yr20": -20701.67938
            }
        ]

        this.tableData.forEach(element => {
            if (element.name != "Portfolio Investment Perfomance") {
                // convert to currency
                element.yr1 = this.currencyPipe.transform(element.yr1, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr5 = this.currencyPipe.transform(element.yr5, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr10 = this.currencyPipe.transform(element.yr10, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr15 = this.currencyPipe.transform(element.yr15, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr16 = this.currencyPipe.transform(element.yr16, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr17 = this.currencyPipe.transform(element.yr17, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr18 = this.currencyPipe.transform(element.yr18, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr19 = this.currencyPipe.transform(element.yr19, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr20 = this.currencyPipe.transform(element.yr20, 'GBP', 'symbol-narrow', '1.0-0');

            } else {
                // add percent symbols
                element.yr1 = this.percentPipe.transform(element.yr1, '1.2-5');
                element.yr5 = this.percentPipe.transform(element.yr5, '1.2-5');
                element.yr10 = this.percentPipe.transform(element.yr10, '1.2-5');
                element.yr15 = this.percentPipe.transform(element.yr15, '1.2-5');
                element.yr16 = this.percentPipe.transform(element.yr16, '1.2-5');
                element.yr17 = this.percentPipe.transform(element.yr17, '1.2-5');
                element.yr18 = this.percentPipe.transform(element.yr18, '1.2-5');
                element.yr19 = this.percentPipe.transform(element.yr19, '1.2-5');
                element.yr20 = this.percentPipe.transform(element.yr20, '1.2-5');
            }
        });

        // console.log(this.tableData);

        return this.tableData;

    }

}
