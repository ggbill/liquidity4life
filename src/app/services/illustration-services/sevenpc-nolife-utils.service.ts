import { Injectable, OnInit } from '@angular/core';
import { DecimalPipe, PercentPipe, CurrencyPipe } from '@angular/common';

@Injectable({
    providedIn: 'root'
})
export class SevenPcNoLifeUtilsService {

    private tableData: any[];
    private chartData: any[];

    constructor(private decimalpipe: DecimalPipe, private percentPipe: PercentPipe, private currencyPipe: CurrencyPipe) { }

    getChartData(): any {

        this.chartData = [
            292500,
            284238.3656,
            262158.5591,
            270095.4576,
            283635.6795,
            290052.8887,
            302012.8411,
            316947.5971,
            337690.0289,
            316949.2451,
            285305.9623,
            296024.7287,
            315762.7907,
            323074.7034,
            335255.3028,
            334915.3327,
            330542.7988,
            280840.3258,
            233317.7068,
            194789.7833
        ]
        return this.chartData;
    }

    getTableData(): any {

        this.tableData = [
            {
                "name": "Portfolio Investment Perfomance",
                "yr1": 0,
                "yr2": -0.06,
                "yr3": 0.081,
                "yr4": 0.109,
                "yr5": 0.077,
                "yr6": 0.104,
                "yr7": 0.118,
                "yr8": 0.142,
                "yr9": -0.011,
                "yr10": -0.052,
                "yr11": 0.126,
                "yr12": 0.169,
                "yr13": 0.124,
                "yr14": 0.152,
                "yr15": 0.118,
                "yr16": 0.1197,
                "yr17": -0.02,
                "yr18": -0.01,
                "yr19": 0.041,
                "yr20": 0.072
            },
            {
                "name": "A1 Units",
                "yr1": 117000,
                "yr2": 114198.5531,
                "yr3": 104450.3334,
                "yr4": 109767.6126,
                "yr5": 118229.7356,
                "yr6": 123447.3396,
                "yr7": 131954.5191,
                "yr8": 142632.4453,
                "yr9": 157280.4419,
                "yr10": 149412.5017,
                "yr11": 135360.2142,
                "yr12": 145670.7793,
                "yr13": 162471.3211,
                "yr14": 173468.7966,
                "yr15": 189238.4422,
                "yr16": 199202.5673,
                "yr17": 208825.2165,
                "yr18": 188792.3127,
                "yr19": 170474.3237,
                "yr20": 160152.8137
            },
            {
                "name": "F36 Units",
                "yr1": 175500,
                "yr2": 170039.8125,
                "yr3": 157708.2257,
                "yr4": 160327.845,
                "yr5": 165405.9438,
                "yr6": 166605.5491,
                "yr7": 170058.322,
                "yr8": 174315.1518,
                "yr9": 180409.587,
                "yr10": 167536.7434,
                "yr11": 149945.7481,
                "yr12": 150353.9494,
                "yr13": 153291.4695,
                "yr14": 149605.9068,
                "yr15": 146016.8606,
                "yr16": 135712.7654,
                "yr17": 121717.5823,
                "yr18": 92048.01307,
                "yr19": 62843.38313,
                "yr20": 34636.96955
            },
            {
                "name": "Property Value",
                "yr1": 375000,
                "yr2": 352500,
                "yr3": 381052.5,
                "yr4": 422587.2225,
                "yr5": 455126.4386,
                "yr6": 502459.5883,
                "yr7": 561749.8197,
                "yr8": 641518.2941,
                "yr9": 634461.5928,
                "yr10": 601469.59,
                "yr11": 677254.7583,
                "yr12": 791710.8125,
                "yr13": 889882.9532,
                "yr14": 1025145.162,
                "yr15": 1146112.291,
                "yr16": 1283301.933,
                "yr17": 1257635.894,
                "yr18": 1245059.535,
                "yr19": 1296106.976,
                "yr20": 1389426.678
            },
            {
                "name": "Amount Invested in Portfolio",
                "yr1": 292500,
                "yr2": 284238.3656,
                "yr3": 262158.5591,
                "yr4": 270095.4576,
                "yr5": 283635.6795,
                "yr6": 290052.8887,
                "yr7": 302012.8411,
                "yr8": 316947.5971,
                "yr9": 337690.0289,
                "yr10": 316949.2451,
                "yr11": 285305.9623,
                "yr12": 296024.7287,
                "yr13": 315762.7907,
                "yr14": 323074.7034,
                "yr15": 335255.3028,
                "yr16": 334915.3327,
                "yr17": 330542.7988,
                "yr18": 280840.3258,
                "yr19": 233317.7068,
                "yr20": 194789.7833
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Income and Gains",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Portfolio Income",
                "yr1": 5374.6875,
                "yr2": 5207.469258,
                "yr3": 4829.814413,
                "yr4": 4910.040253,
                "yr5": 5065.55703,
                "yr6": 5102.29494,
                "yr7": 5208.03611,
                "yr8": 5338.401524,
                "yr9": 5525.043602,
                "yr10": 5130.812766,
                "yr11": 4592.088537,
                "yr12": 4604.589701,
                "yr13": 4694.551255,
                "yr14": 4581.680896,
                "yr15": 4471.766356,
                "yr16": 4156.203439,
                "yr17": 3727.600958,
                "yr18": 2818.9704,
                "yr19": 1924.578608,
                "yr20": 1060.757192
            },
            {
                "name": "A Unit Gains",
                "yr1": 2593.678125,
                "yr2": -4235.218695,
                "yr3": 10673.18006,
                "yr4": 14296.05656,
                "yr5": 11710.35819,
                "yr6": 15565.39773,
                "yr7": 18515.00626,
                "yr8": 23450.71883,
                "yr9": 2213.209862,
                "yr10": -3858.93116,
                "yr11": 20255.87195,
                "yr12": 28038.17772,
                "yr13": 24128.44872,
                "yr14": 30618.41745,
                "yr15": 27138.42736,
                "yr16": 28980.23086,
                "yr17": 1824.301604,
                "yr18": 3584.774205,
                "yr19": 11835.89683,
                "yr20": 16063.7223
            },
            {
                "name": "F Unit Gains",
                "yr1": 0,
                "yr2": -6631.552688,
                "yr3": 8303.338085,
                "yr4": 11359.22782,
                "yr5": 8278.567489,
                "yr6": 11262.53512,
                "yr7": 13043.47329,
                "yr8": 16089.28851,
                "yr9": -1289.928547,
                "yr10": -5662.741926,
                "yr11": 12280.55677,
                "yr12": 16516.38134,
                "yr13": 12355.29244,
                "yr14": 14781.06359,
                "yr15": 11199.49321,
                "yr16": 10559.13171,
                "yr17": -1582.32857,
                "yr18": -598.3120849,
                "yr19": 1194.024279,
                "yr20": 1621.010175
            },
            {
                "name": "Total Investment Return",
                "yr1": 7968.365625,
                "yr2": -5659.302124,
                "yr3": 23806.33255,
                "yr4": 30565.32463,
                "yr5": 25054.48271,
                "yr6": 31930.22779,
                "yr7": 36766.51566,
                "yr8": 44878.40886,
                "yr9": 6448.324917,
                "yr10": -4390.86032,
                "yr11": 37128.51726,
                "yr12": 49159.14876,
                "yr13": 41178.29242,
                "yr14": 49981.16193,
                "yr15": 42809.68692,
                "yr16": 43695.566,
                "yr17": 3969.573993,
                "yr18": 5805.43252,
                "yr19": 14954.49971,
                "yr20": 18745.48967
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Expenditure",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Utility Costs",
                "yr1": -4301.25,
                "yr2": -4408.78125,
                "yr3": -4519.000781,
                "yr4": -4631.975801,
                "yr5": -4747.775196,
                "yr6": -4866.469576,
                "yr7": -4988.131315,
                "yr8": -5112.834598,
                "yr9": -5240.655463,
                "yr10": -5371.671849,
                "yr11": -5505.963646,
                "yr12": -5643.612737,
                "yr13": -5784.703055,
                "yr14": -5929.320632,
                "yr15": -6077.553647,
                "yr16": -6229.492489,
                "yr17": -6385.229801,
                "yr18": -6544.860546,
                "yr19": -6708.48206,
                "yr20": -6876.194111
            },
            {
                "name": "Property Costs",
                "yr1": -8418.75,
                "yr2": -8598.346688,
                "yr3": -8206.596047,
                "yr4": -9143.334334,
                "yr5": -10461.99281,
                "yr6": -11586.04025,
                "yr7": -13163.72732,
                "yr8": -15140.50427,
                "yr9": -17785.15073,
                "yr10": -17964.19565,
                "yr11": -17373.92658,
                "yr12": -20088.87284,
                "yr13": -24111.69215,
                "yr14": -27773.15086,
                "yr15": -32773.35816,
                "yr16": -37493.44124,
                "yr17": -42937.26312,
                "yr18": -43030.82614,
                "yr19": -43588.39248,
                "yr20": -46433.54766
            },
            {
                "name": "Administration Fees",
                "yr1": -3510,
                "yr2": -3413.376422,
                "yr3": -3143.837258,
                "yr4": -3249.792639,
                "yr5": -3427.505473,
                "yr6": -3517.765585,
                "yr7": -3679.901006,
                "yr8": -3882.638197,
                "yr9": -4163.302498,
                "yr10": -3916.55496,
                "yr11": -3529.860694,
                "yr12": -3688.601183,
                "yr13": -3969.984512,
                "yr14": -4098.091017,
                "yr15": -4298.745239,
                "yr16": -4345.166163,
                "yr17": -4349.55407,
                "yr18": -3752.364822,
                "yr19": -3185.548686,
                "yr20": -2748.661902
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Total Cost",
                "yr1": -16230,
                "yr2": -16420.50436,
                "yr3": -15869.43409,
                "yr4": -17025.10277,
                "yr5": -18637.27348,
                "yr6": -19970.27541,
                "yr7": -21831.75964,
                "yr8": -24135.97707,
                "yr9": -27189.10869,
                "yr10": -27252.42246,
                "yr11": -26409.75092,
                "yr12": -29421.08676,
                "yr13": -33866.37972,
                "yr14": -37800.56251,
                "yr15": -43149.65705,
                "yr16": -48068.09989,
                "yr17": -53672.04699,
                "yr18": -53328.05151,
                "yr19": -53482.42323,
                "yr20": -56058.40367
            },
            {
                "name": "Portfolio Gains/Losses",
                "yr1": -8261.634375,
                "yr2": -22079.80648,
                "yr3": 7936.898467,
                "yr4": 13540.22186,
                "yr5": 6417.20923,
                "yr6": 11959.95238,
                "yr7": 14934.75602,
                "yr8": 20742.4318,
                "yr9": -20740.78378,
                "yr10": -31643.28278,
                "yr11": 10718.76634,
                "yr12": 19738.062,
                "yr13": 7311.912702,
                "yr14": 12180.59942,
                "yr15": -339.9701219,
                "yr16": -4372.533885,
                "yr17": -49702.473,
                "yr18": -47522.61899,
                "yr19": -38527.92352,
                "yr20": -37312.914
            }
        ]

        this.tableData.forEach(element => {
            if (element.name != "Portfolio Investment Perfomance") {
                // convert to currency
                element.yr1 = this.currencyPipe.transform(element.yr1, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr5 = this.currencyPipe.transform(element.yr5, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr10 = this.currencyPipe.transform(element.yr10, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr15 = this.currencyPipe.transform(element.yr15, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr16 = this.currencyPipe.transform(element.yr16, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr17 = this.currencyPipe.transform(element.yr17, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr18 = this.currencyPipe.transform(element.yr18, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr19 = this.currencyPipe.transform(element.yr19, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr20 = this.currencyPipe.transform(element.yr20, 'GBP', 'symbol-narrow', '1.0-0');

            } else {
                // add percent symbols
                element.yr1 = this.percentPipe.transform(element.yr1, '1.2-5');
                element.yr5 = this.percentPipe.transform(element.yr5, '1.2-5');
                element.yr10 = this.percentPipe.transform(element.yr10, '1.2-5');
                element.yr15 = this.percentPipe.transform(element.yr15, '1.2-5');
                element.yr16 = this.percentPipe.transform(element.yr16, '1.2-5');
                element.yr17 = this.percentPipe.transform(element.yr17, '1.2-5');
                element.yr18 = this.percentPipe.transform(element.yr18, '1.2-5');
                element.yr19 = this.percentPipe.transform(element.yr19, '1.2-5');
                element.yr20 = this.percentPipe.transform(element.yr20, '1.2-5');
            }
        });

        return this.tableData;

    }

}
