import { Injectable, OnInit } from '@angular/core';
import { DecimalPipe, PercentPipe, CurrencyPipe } from '@angular/common';

@Injectable({
    providedIn: 'root'
})
export class SevenPcLifeNoUtilsService {

    private tableData: any[];
    private chartData: any[];

    constructor(private decimalpipe: DecimalPipe, private percentPipe: PercentPipe, private currencyPipe: CurrencyPipe) { }

    getChartData(): any {

        this.chartData = [
            292500,
            284939.6156,
            263568.9525,
            272380.1836,
            286949.7601,
            294456.3558,
            307724.2689,
            324205.5056,
            346855.2632,
            327213.3848,
            296388.3474,
            309510.5153,
            332470.5232,
            342991.2996,
            359297.9166,
            363124.2091,
            363547.9966,
            315612.2391,
            270214.3548,
            235275.271
        ]
        return this.chartData;
    }

    getTableData(): any {

        this.tableData = [
            {
                "name": "Portfolio Investment Perfomance",
                "yr1": 0,
                "yr2": -0.06,
                "yr3": 0.081,
                "yr4": 0.109,
                "yr5": 0.077,
                "yr6": 0.104,
                "yr7": 0.118,
                "yr8": 0.142,
                "yr9": -0.011,
                "yr10": -0.052,
                "yr11": 0.126,
                "yr12": 0.169,
                "yr13": 0.124,
                "yr14": 0.152,
                "yr15": 0.118,
                "yr16": 0.1197,
                "yr17": -0.02,
                "yr18": -0.01,
                "yr19": 0.041,
                "yr20": 0.072
            },
            {
                "name": "A1 Units",
                "yr1": 117000,
                "yr2": 114479.0531,
                "yr3": 105010.4436,
                "yr4": 110685.7053,
                "yr5": 119579.4679,
                "yr6": 125254.4838,
                "yr7": 134326.1531,
                "yr8": 145687.3696,
                "yr9": 161203.4851,
                "yr10": 153768.7591,
                "yr11": 139995.3888,
                "yr12": 151411.8203,
                "yr13": 169750.9875,
                "yr14": 182284.8615,
                "yr15": 200091.1699,
                "yr16": 212118.3169,
                "yr17": 224155.7204,
                "yr18": 204814.4397,
                "yr19": 187385.5385,
                "yr20": 178855.3499
            },
            {
                "name": "B36 Units",
                "yr1": 175500,
                "yr2": 170460.5625,
                "yr3": 158558.5089,
                "yr4": 161694.4783,
                "yr5": 167370.2922,
                "yr6": 169201.872,
                "yr7": 173398.1158,
                "yr8": 178518.136,
                "yr9": 185651.7781,
                "yr10": 173444.6257,
                "yr11": 156392.9586,
                "yr12": 158098.695,
                "yr13": 162719.5357,
                "yr14": 160706.4381,
                "yr15": 159206.7467,
                "yr16": 151005.8923,
                "yr17": 139392.2762,
                "yr18": 110797.7993,
                "yr19": 82828.81632,
                "yr20": 56419.92103
            },
            {
                "name": "Property Value",
                "yr1": 375000,
                "yr2": 352500,
                "yr3": 381052.5,
                "yr4": 422587.2225,
                "yr5": 455126.4386,
                "yr6": 502459.5883,
                "yr7": 561749.8197,
                "yr8": 641518.2941,
                "yr9": 634461.5928,
                "yr10": 601469.59,
                "yr11": 677254.7583,
                "yr12": 791710.8125,
                "yr13": 889882.9532,
                "yr14": 1025145.162,
                "yr15": 1146112.291,
                "yr16": 1283301.933,
                "yr17": 1257635.894,
                "yr18": 1245059.535,
                "yr19": 1296106.976,
                "yr20": 1389426.678
            },
            {
                "name": "Amount Invested in Portfolio",
                "yr1": 292500,
                "yr2": 284939.6156,
                "yr3": 263568.9525,
                "yr4": 272380.1836,
                "yr5": 286949.7601,
                "yr6": 294456.3558,
                "yr7": 307724.2689,
                "yr8": 324205.5056,
                "yr9": 346855.2632,
                "yr10": 327213.3848,
                "yr11": 296388.3474,
                "yr12": 309510.5153,
                "yr13": 332470.5232,
                "yr14": 342991.2996,
                "yr15": 359297.9166,
                "yr16": 363124.2091,
                "yr17": 363547.9966,
                "yr18": 315612.2391,
                "yr19": 270214.3548,
                "yr20": 235275.271
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Income and Gains",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Portfolio Income",
                "yr1": 5374.6875,
                "yr2": 5220.354727,
                "yr3": 4855.854335,
                "yr4": 4951.893397,
                "yr5": 5125.715198,
                "yr6": 5181.807329,
                "yr7": 5310.317296,
                "yr8": 5467.117915,
                "yr9": 5685.585704,
                "yr10": 5311.741662,
                "yr11": 4789.534357,
                "yr12": 4841.772536,
                "yr13": 4983.285782,
                "yr14": 4921.634667,
                "yr15": 4875.706619,
                "yr16": 4624.55545,
                "yr17": 4268.888458,
                "yr18": 3393.182605,
                "yr19": 2536.6325,
                "yr20": 1727.860081
            },
            {
                "name": "A Unit Gains",
                "yr1": 2593.678125,
                "yr2": -4248.695906,
                "yr3": 10725.17576,
                "yr4": 14407.54139,
                "yr5": 11832.24347,
                "yr6": 15778.35504,
                "yr7": 18829.18562,
                "yr8": 23930.48067,
                "yr9": 2236.487671,
                "yr10": -4007.346414,
                "yr11": 20918.26026,
                "yr12": 29107.87846,
                "yr13": 25165.66698,
                "yr14": 32125.57291,
                "yr15": 28636.52254,
                "yr16": 30794.26469,
                "yr17": 1875.973254,
                "yr18": 3809.180243,
                "yr19": 12935.68971,
                "yr20": 17866.86617
            },
            {
                "name": "B Unit Gains",
                "yr1": 0,
                "yr2": -6647.961938,
                "yr3": 8348.105493,
                "yr4": 11456.05378,
                "yr5": 8376.883123,
                "yr6": 11438.04655,
                "yr7": 13299.63548,
                "yr8": 16477.22395,
                "yr9": -1327.410213,
                "yr10": -5862.428349,
                "yr11": 12808.58331,
                "yr12": 17367.14165,
                "yr13": 13115.19458,
                "yr14": 15877.79609,
                "yr15": 12211.15747,
                "yr16": 11749.01345,
                "yr17": -1812.09959,
                "yr18": -720.1856957,
                "yr19": 1573.74751,
                "yr20": 2640.452304
            },
            {
                "name": "Total Investment Return",
                "yr1": 7968.365625,
                "yr2": -5676.303117,
                "yr3": 23929.13559,
                "yr4": 30815.48857,
                "yr5": 25334.8418,
                "yr6": 32398.20892,
                "yr7": 37439.1384,
                "yr8": 45874.82254,
                "yr9": 6594.663161,
                "yr10": -4558.033101,
                "yr11": 38516.37793,
                "yr12": 51316.79265,
                "yr13": 43264.14734,
                "yr14": 52925.00366,
                "yr15": 45723.38663,
                "yr16": 47167.83359,
                "yr17": 4332.762121,
                "yr18": 6482.177152,
                "yr19": 17046.06972,
                "yr20": 22235.17856
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Expenditure",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Lifestyle Costs ",
                "yr1": -3600,
                "yr2": -3690,
                "yr3": -3782.25,
                "yr4": -3876.80625,
                "yr5": -3973.726406,
                "yr6": -4073.069566,
                "yr7": -4174.896306,
                "yr8": -4279.268713,
                "yr9": -4386.250431,
                "yr10": -4495.906692,
                "yr11": -4608.304359,
                "yr12": -4723.511968,
                "yr13": -4841.599767,
                "yr14": -4962.639761,
                "yr15": -5086.705756,
                "yr16": -5213.873399,
                "yr17": -5344.220234,
                "yr18": -5477.82574,
                "yr19": -5614.771384,
                "yr20": -5755.140668
            },
            {
                "name": "Property Costs",
                "yr1": -8418.75,
                "yr2": -8582.568563,
                "yr3": -8174.912785,
                "yr4": -9091.875471,
                "yr5": -10387.12475,
                "yr6": -11486.39027,
                "yr7": -13034.13191,
                "yr8": -14975.30432,
                "yr9": -17575.72109,
                "yr10": -17730.11999,
                "yr11": -17122.04516,
                "yr12": -19781.10856,
                "yr13": -23728.311,
                "yr14": -27314.40962,
                "yr15": -32216.95332,
                "yr16": -36838.33903,
                "yr17": -42168.04086,
                "yr18": -42222.04107,
                "yr19": -42731.31096,
                "yr20": -45491.26992
            },
            {
                "name": "Administration Fees",
                "yr1": -3510,
                "yr2": -3421.791422,
                "yr3": -3160.741743,
                "yr4": -3277.230362,
                "yr5": -3467.39494,
                "yr6": -3570.835977,
                "yr7": -3748.873454,
                "yr8": -3970.491904,
                "yr9": -4274.570058,
                "yr10": -4040.977643,
                "yr11": -3663.860417,
                "yr12": -3852.164255,
                "yr13": -4173.460169,
                "yr14": -4341.337304,
                "yr15": -4593.435015,
                "yr16": -4691.833676,
                "yr17": -4756.258568,
                "yr18": -4180.194589,
                "yr19": -3639.071241,
                "yr20": -3247.029459
            },
            {
                "name": "",
                "yr1": null,
                "yr2": null,
                "yr3": null,
                "yr4": null,
                "yr5": null,
                "yr6": null,
                "yr7": null,
                "yr8": null,
                "yr9": null,
                "yr10": null,
                "yr11": null,
                "yr12": null,
                "yr13": null,
                "yr14": null,
                "yr15": null,
                "yr16": null,
                "yr17": null,
                "yr18": null,
                "yr19": null,
                "yr20": null
            },
            {
                "name": "Total Cost",
                "yr1": -15528.75,
                "yr2": -15694.35998,
                "yr3": -15117.90453,
                "yr4": -16245.91208,
                "yr5": -17828.2461,
                "yr6": -19130.29581,
                "yr7": -20957.90167,
                "yr8": -23225.06494,
                "yr9": -26236.54158,
                "yr10": -26267.00433,
                "yr11": -25394.20994,
                "yr12": -28356.78478,
                "yr13": -32743.37094,
                "yr14": -36618.38668,
                "yr15": -41897.09409,
                "yr16": -46744.04611,
                "yr17": -52268.51966,
                "yr18": -51880.0614,
                "yr19": -51985.15358,
                "yr20": -54493.44005
            },
            {
                "name": "Portfolio Gains/Losses",
                "yr1": -7560.384375,
                "yr2": -21370.6631,
                "yr3": 8811.23106,
                "yr4": 14569.57649,
                "yr5": 7506.595699,
                "yr6": 13267.9131,
                "yr7": 16481.23672,
                "yr8": 22649.7576,
                "yr9": -19641.87842,
                "yr10": -30825.03743,
                "yr11": 13122.16799,
                "yr12": 22960.00787,
                "yr13": 10520.7764,
                "yr14": 16306.61698,
                "yr15": 3826.29254,
                "yr16": 423.78748,
                "yr17": -47935.75754,
                "yr18": -45397.88425,
                "yr19": -34939.08386,
                "yr20": -32258.26149
            }
        ]

        this.tableData.forEach(element => {
            if (element.name != "Portfolio Investment Perfomance") {
                // convert to currency
                element.yr1 = this.currencyPipe.transform(element.yr1, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr5 = this.currencyPipe.transform(element.yr5, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr10 = this.currencyPipe.transform(element.yr10, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr15 = this.currencyPipe.transform(element.yr15, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr16 = this.currencyPipe.transform(element.yr16, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr17 = this.currencyPipe.transform(element.yr17, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr18 = this.currencyPipe.transform(element.yr18, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr19 = this.currencyPipe.transform(element.yr19, 'GBP', 'symbol-narrow', '1.0-0');
                element.yr20 = this.currencyPipe.transform(element.yr20, 'GBP', 'symbol-narrow', '1.0-0');

            } else {
                // add percent symbols
                element.yr1 = this.percentPipe.transform(element.yr1, '1.2-5');
                element.yr5 = this.percentPipe.transform(element.yr5, '1.2-5');
                element.yr10 = this.percentPipe.transform(element.yr10, '1.2-5');
                element.yr15 = this.percentPipe.transform(element.yr15, '1.2-5');
                element.yr16 = this.percentPipe.transform(element.yr16, '1.2-5');
                element.yr17 = this.percentPipe.transform(element.yr17, '1.2-5');
                element.yr18 = this.percentPipe.transform(element.yr18, '1.2-5');
                element.yr19 = this.percentPipe.transform(element.yr19, '1.2-5');
                element.yr20 = this.percentPipe.transform(element.yr20, '1.2-5');
            }
        });

        return this.tableData;

    }

}
